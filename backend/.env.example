# Backend Environment Variables
# Copy this file to .env and fill in the values

# Server
NODE_ENV=development
PORT=3001

# URLs
API_URL=http://localhost:3001
FRONTEND_URL=http://localhost:5173

# Database (PostgreSQL)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/lead_engine_cre?schema=public

# Redis (optional - for RTB pub/sub)
REDIS_URL=redis://localhost:6379

# Authentication
JWT_SECRET=your-64-char-hex-secret-here-generate-with-openssl-rand-hex-32

# Blockchain / Web3
ALCHEMY_API_KEY=your-alchemy-api-key
RPC_URL_SEPOLIA=https://eth-sepolia.g.alchemy.com/v2/YOUR_KEY
RPC_URL_BASE_SEPOLIA=https://sepolia.base.org
PAYMENT_RECIPIENT_ADDRESS=0xYourWalletAddress

# Smart Contract Addresses — Sepolia (fallback)
ACE_CONTRACT_ADDRESS=
CRE_CONTRACT_ADDRESS=
MARKETPLACE_CONTRACT_ADDRESS=
LEAD_NFT_CONTRACT_ADDRESS=
ESCROW_CONTRACT_ADDRESS=

# Smart Contract Addresses — Base Sepolia (primary)
LEAD_NFT_CONTRACT_ADDRESS_BASE_SEPOLIA=0x73ebD9218aDe497C9ceED04E5CcBd06a00Ba7155
RTB_ESCROW_CONTRACT_ADDRESS_BASE_SEPOLIA=0xf3fCB43f882b5aDC43c2E7ae92c3ec5005e4cBa2
PERSONAL_ESCROW_CONTRACT_ADDRESS_BASE_SEPOLIA=0xf09cf1d4389A1Af11542F96280dc91739E866e74
CRE_CONTRACT_ADDRESS_BASE_SEPOLIA=0xfec22A5159E077d7016AAb5fC3E91e0124393af8
ACE_CONTRACT_ADDRESS_BASE_SEPOLIA=0xAea2590E1E95F0d8bb34D375923586Bf0744EfE6
ACE_LEAD_POLICY_ADDRESS_BASE_SEPOLIA=0x013f3219012030aC32cc293fB51a92eBf82a566F
# FIX 2026-02-21: Added VRF tiebreaker address (was missing from .env.example)
VRF_TIEBREAKER_CONTRACT_ADDRESS_BASE_SEPOLIA=0x86c8f348d816c35fc0bd364e4a9fa8a1e0fd930e
MARKETPLACE_ADDRESS=0xfDf961C1E6687593E3aad9C6f585be0e44f96905
VERTICAL_NFT_ADDRESS=0x60c248c24cC5ba0848b8306424eBaFE1fD07EC5b
VERTICAL_AUCTION_ADDRESS=0x40504235526e3Bf07684b06Cfc7bafbCfef71003
BOUNTY_MATCHER_ADDRESS=
BOUNTY_POOL_ADDRESS=

# Block Explorer API Keys
BASESCAN_API_KEY=


CRE_API_KEY=

# USDC Contract Addresses
USDC_SEPOLIA=0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238
USDC_BASE_SEPOLIA=0x036CbD53842c5426634e7929541eC2318f3dCF7e
USDC_CONTRACT_ADDRESS=0x036CbD53842c5426634e7929541eC2318f3dCF7e

# Chainlink
CHAINLINK_ROUTER_SEPOLIA=0xb83E47C2bC239B3bf370bc41e1459A34b41238D0
CHAINLINK_DON_ID_SEPOLIA=0x66756e2d657468657265756d2d7365706f6c69612d3100000000000000000000
CHAINLINK_ROUTER_BASE_SEPOLIA=0xf9B8fc078197181C841c296C876945aaa425B278
CHAINLINK_DON_ID_BASE_SEPOLIA=0x66756e2d626173652d7365706f6c69612d310000000000000000000000000000
CRE_SUBSCRIPTION_ID=581
# FIX 2026-02-21: Added VRF_SUBSCRIPTION_ID — get from VRF v2.5 dashboard after funding
VRF_SUBSCRIPTION_ID=<your-vrf-subscription-id>

# Deployer (for contract deployment — NEVER commit real key)
DEPLOYER_PRIVATE_KEY=0x_your_deployer_private_key

# Platform NFT Ownership
PLATFORM_WALLET_ADDRESS=0xYourPlatformWalletAddress  # Wallet that owns minted vertical NFTs (defaults to DEPLOYER_ADDRESS)

# Chainlink Price Feed (for resale fair pricing)
CHAINLINK_PRICE_FEED_ADDRESS=                         # ETH/USD or USDC/USD feed address (simulated if empty)

# Privacy Suite
PRIVACY_ENCRYPTION_KEY=generate-with-openssl-rand-hex-32

# Block Explorer Verification
ETHERSCAN_API_KEY=
BASESCAN_API_KEY=

# Optional Services
# SENTRY_DSN=
# SENDGRID_API_KEY=

# Analytics Mock Toggle
# Set to "true" to serve deterministic Faker.js data from analytics endpoints.
# Set to "false" (or omit) for real Prisma/Redis queries.
# ⚠️  IGNORED when NODE_ENV=production — real data always used in prod.
USE_MOCK_DATA=false

# Kimi K2.5 (Moonshot AI) — used by the /api/v1/mcp/chat agent endpoint
# Get a key at https://platform.moonshot.cn/
# Set the real key in your hosting platform's env vars — never commit it.
KIMI_API_KEY=sk-...

# Confidential HTTP — Enabled by default (Phase 1 CHTT Integration)
# When true, lead scoring fetches fraud signals (phone/email/conversion intelligence)
# through the Confidential HTTP workflow stub (simulated TEE enclave execution).
# Provenance stored in lead.parameters._chtt JSONB. TEE badge shown on lead cards.
# When false, direct DB scoring is used (no fraud-signal enrichment).
# Reference: https://docs.chain.link/cre/capabilities/confidential-http-ts
USE_CONFIDENTIAL_HTTP=true

# Bounty Functions — Experimental
# Enables Chainlink Functions-based bounty matching.
BOUNTY_FUNCTIONS_ENABLED=false

# MCP Agent Server
MCP_SERVER_URL=http://localhost:3002

# Test Mode — bypass certain guards in development
TEST_MODE=false
