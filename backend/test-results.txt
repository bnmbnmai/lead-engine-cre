node.exe : PASS tests/unit/ace.service.test.ts
At C:\Program Files\nodejs\npx.ps1:29 char:3
+   & $NODE_EXE $NPX_CLI_JS $args
+   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (PASS tests/ 
   unit/ace.service.test.ts:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  ACEService
    enforceJurisdictionPolicy
      √ should allow when no restrictions exist in DB (7 
ms)
      √ should block when DB restriction exists (1 ms)
    checkCrossBorderCompliance
      √ should allow same-state transactions (1 ms)
      √ should block cross-state mortgage with 
restricted states
      √ should block cross-state insurance with NY (1 ms)
      √ should allow cross-state solar (unrestricted 
vertical)
      √ should allow cross-state mortgage between 
unrestricted states
      √ should handle CA mortgage cross-border 
restriction
    autoKYC
      √ should create KYC check in database (off-chain) 
(2 ms)
      √ should set 1-year expiry on KYC check
    updateReputation
      √ should update reputation in DB for existing 
seller (1 ms)
      √ should clamp reputation at 0 (floor)
      √ should clamp reputation at 10000 (ceiling)
      √ should return error for non-existent seller
    isKYCValid
      √ should return false for unknown wallet 
(off-chain) (1 ms)
      √ should return true for valid KYC in DB
    edge cases
      √ should handle empty wallet address gracefully
      √ should handle cross-border with empty vertical

PASS tests/unit/zk.service.test.ts
  ZKService
    generateFraudProof
      √ should generate a valid fraud proof with all 
fields (11 ms)
      √ should produce different proofs for different 
leads (4 ms)
      √ should handle missing optional fields (1 ms)
    verifyProofLocally
      √ should verify a valid fraud proof (2 ms)
      √ should reject an empty/zero proof
      √ should reject a proof with no public inputs (1 
ms)
      √ should reject a proof with zero commitment (1 ms)
    generateGeoParameterMatchProof
      √ should detect matching geo state (1 ms)
      √ should detect non-matching geo state (1 ms)
      √ should detect parameter threshold failures (1 ms)
    generateBidCommitment
      √ should generate a valid bid commitment
      √ should produce unique commitments for same 
amount (random salts) (1 ms)

PASS tests/unit/nft.service.test.ts
  NFTService
    mintLeadNFT
      √ should return error for non-existent lead (6 ms)
      √ should return existing tokenId if already minted
      √ should create off-chain pseudo-tokenId when no 
contract (3 ms)
    recordSaleOnChain
      √ should succeed for off-chain token (logged only) 
(1 ms)
    getTokenMetadata
      √ should return null for non-existent token
      √ should return DB-based metadata for off-chain 
token (1 ms)
    updateQualityScoreOnChain
      √ should succeed silently for off-chain token 
(no-op)

PASS tests/unit/x402.service.test.ts
  X402Service
    createPayment
      √ should create off-chain escrow when no contract 
configured (9 ms)
    settlePayment
      √ should settle off-chain transaction (1 ms)
      √ should return error for non-existent transaction
      √ should return error for transaction without 
escrow (1 ms)
    refundPayment
      √ should refund off-chain transaction
      √ should return error for non-existent transaction
    getPaymentStatus
      √ should return null for non-existent transaction 
(1 ms)
      √ should return DB-based status for off-chain 
escrow
    generatePaymentHeader
      √ should generate correct x402 payment headers (1 
ms)
      √ should handle zero amount
    edge cases
      √ should handle double-settle gracefully

PASS tests/unit/privacy.service.test.ts
  PrivacyService
    encrypt/decrypt round-trip
      √ should encrypt and decrypt lead PII correctly 
(10 ms)
      √ should produce different ciphertext for same 
plaintext (unique IV) (2 ms)
      √ should throw on tampered ciphertext (9 ms)
      √ should throw on tampered auth tag (1 ms)
    encryptBid / decryptBid
      √ should encrypt bid and decrypt with valid 
commitment (2 ms)
      √ should fail reveal with wrong buyer address (AAD 
mismatch) (1 ms)
      √ should produce unique commitments for same 
amount (different salts) (1 ms)
      √ should handle small and large amounts (1 ms)
    encryptTokenMetadata / decryptTokenMetadata
      √ should keep public fields visible and encrypt 
private fields
      √ should return null encryptedFields when no PII 
or parameters
    generateCommitment / verifyCommitment
      √ should generate and verify a valid commitment (3 
ms)
      √ should fail verification with wrong value
      √ should fail verification with wrong salt (1 ms)

PASS tests/compliance/ace-simulation.test.ts
  ACE Compliance Simulation
    cross-border: NY mortgage cross-border
      √ FL→NY mortgage: BLOCKED (8 ms)
    cross-border: NY mortgage cross-border (reverse)
      √ NY→FL mortgage: BLOCKED (1 ms)
    cross-border: CA mortgage cross-border
      √ CA→TX mortgage: BLOCKED
    cross-border: FL mortgage cross-border
      √ FL→TX mortgage: BLOCKED
    cross-border: TX→CO unrestricted
      √ TX→CO mortgage: ALLOWED
    cross-border: WA→OR unrestricted
      √ WA→OR mortgage: ALLOWED
    cross-border: MA→OH unrestricted (MA not in list)
      √ MA→OH mortgage: ALLOWED
    cross-border: NY insurance cross-border
      √ TX→NY insurance: BLOCKED (1 ms)
    cross-border: CA→FL insurance (CA not restricted for 
insurance)
      √ CA→FL insurance: ALLOWED
    cross-border: FL→GA unrestricted insurance
      √ FL→GA insurance: ALLOWED
    cross-border: Solar unrestricted
      √ FL→CA solar: ALLOWED
    cross-border: Solar unrestricted NY→TX
      √ NY→TX solar: ALLOWED
    cross-border: Solar unrestricted CA→WA
      √ CA→WA solar: ALLOWED
    cross-border: Roofing unrestricted
      √ FL→NY roofing: ALLOWED
    cross-border: Same-state mortgage NY
      √ NY→NY mortgage: ALLOWED
    cross-border: Same-state insurance CA
      √ CA→CA insurance: ALLOWED
    cross-border: Same-state solar FL
      √ FL→FL solar: ALLOWED
    reputation scenarios
      √ reputation 0 + 100 = 100 (1 ms)
      √ reputation 5000 + 500 = 5500
      √ reputation 9900 + 200 = 10000
      √ reputation 100 + -500 = 0
      √ reputation 10000 + 0 = 10000
      √ reputation 0 + 0 = 0 (1 ms)
      √ reputation 3000 + -3000 = 0
      √ reputation 7500 + 2500 = 10000
    off-site API fraud edge cases
      √ should block known fraudulent wallet (blacklist 
hit)
      √ should handle wallet with no history (first 
interaction)
      √ should auto-KYC new wallet and persist (2 ms)
      √ should handle rapid sequential compliance checks 
(3 ms)
    jurisdiction policy enforcement
      √ should allow when no DB restriction (3 ms)
      √ should block when DB has failed check (1 ms)

PASS tests/security/privacy-audit.test.ts
  Privacy Audit
    no plaintext leakage
      √ should never contain original PII in ciphertext 
(8 ms)
      √ should never contain bid amount in ciphertext (1 
ms)
      √ should never contain parameter values in token 
metadata encryption (1 ms)
    commitment integrity
      √ should detect tampered bid (commitment mismatch 
on reveal) (2 ms)
      √ should prevent bid amount manipulation (3 ms)
    AAD binding
      √ should prevent buyer A from decrypting buyer B 
bid (1 ms)
      √ should prevent case-altered address from 
decrypting
    PII at rest
      √ should produce ciphertext of sufficient length 
for PII data (1 ms)
      √ should not store PII fields in public metadata 
(1 ms)
    key sensitivity
      √ should produce deterministic data hash for same 
PII

PASS tests/unit/cre.service.test.ts
  CREService
    verifyLead
      √ should return invalid for non-existent lead (8 
ms)
      √ should return valid for already-verified lead
      √ should fail for lead without TCPA consent (1 ms)
      √ should fail for lead with expired TCPA consent
      √ should fail for invalid US state
      √ should pass for valid lead with all checks (1 ms)
      √ should fail for data integrity mismatch (2 ms)
    getQualityScore
      √ should return 0 for non-existent lead
      √ should return base score for minimal lead
      √ should add bonuses for verified lead with all 
fields
      √ should cap quality score at 10000
    matchLeadToAsk
      √ should return no match for nonexistent lead or 
ask
      √ should reject on vertical mismatch
      √ should match with correct vertical and geo (1 ms)
      √ should reject when lead geo not in targeted 
states
      √ should add score for meeting reserve price

PASS tests/e2e/demo-flow.test.ts
  E2E Demo Flow
    full pipeline simulation
      √ should complete all 8 steps successfully (15 ms)
      √ should handle non-compliant buyer (ACE blocked) 
(1 ms)
      √ should handle wrong buyer address in bid reveal 
(1 ms)
    ZK + Privacy cross-service
      √ should generate matching ZK proof and privacy 
commitment for same lead (2 ms)
      √ should geo-match mortgage lead to CA buyer 
criteria (2 ms)

Test Suites: 9 passed, 9 total
Tests:       123 passed, 123 total
Snapshots:   0 total
Time:        3.003 s, estimated 4 s
Ran all test suites.
